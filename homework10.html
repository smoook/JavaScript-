<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title></title>
  </head>
  <body>
    <script>
    // 定义我们的 log 函数
    var log = function() {
        return console.log.apply(console, arguments)
    }


    // 定义我们用于测试的函数
    // ensure 接受两个参数
    // condition 是 bool, 如果为 false, 则输出 message
    // 否则, 不做任何处理
    var ensure = function(condition, message) {
        // 在条件不成立的时候, 输出 message
        if(!condition) {
            log('eooro:', message)
        }
    }


    // 作业 1
    //
    var ascii = function(char) {
        /*
        char 是一个长度为 1 的 string
        这个函数返回这个字符的 ASCII 码

        这个答案用到了 s.charCodeAt(index) 函数, 例子如下
        'A'.charCodeAt(0) 返回 65
        'a'.charCodeAt(0) 返回 97

        字符在电脑中的存储是以数字的方式
        每个字符其实是用一个数字代表的, 这个方式叫做编码
        ASCII 码是一个通用的编码, 包含英文字符数字和常见符号

        这个作业答案我给了, 理解一下这件事就好, 不懂搜一下
        */
       return char.charCodeAt(0)
    }


    // 作业 2
    //
    var charFromAscii = function(code) {
        /*
        code 是一个 int
        返回 code 所表示的字符

        这个答案用到了 String.fromCharCode(code) 函数, 例子如下
        String.fromCharCode(97) 返回 'a'
        String.fromCharCode(65) 返回 'A'
        */
       return String.fromCharCode(code)
    }
    log(ascii('a'), charFromAscii(49))


    // 作业 3
    var zfill = function(n, width) {
        var len = width - n.toString().length
        var str = ''
        for(var i = 0; i < len; i++) {
            str += '0'
        }
        return str + n
    }
    var binary = function(n) {
        var num = 0
        var result = 0
        for(var i = 0; i < 8; i++) {
            num = n % 2
            n = Math.floor(n / 2)
            result = result + num * Math.pow(10, i) 
        }
        result = zfill(result, 8)
        return result
    }
    log(binary(8))
        /*
        n 是一个不大于 255 的 int
        返回 n 的 8 位二进制形式的字符串
        例如 binary(7) 返回 '00000111'

        进制转换自行搜索或者论坛提问大家讨论吧
        */



    // 作业 4
    var int = function(bin) {
        bin = Number(bin)
        var num = 0
        var result = 0
        for(var i = 0; i < 8; i++) {
            num = bin % 10
            bin = Math.floor(bin / 10)
            result = result + num * Math.pow(2, i) 
        }
        return result
    }
    log(int('00001111'))
        /*
        bin 是一个 8 位二进制形式的字符串
        返回 bin 代表的数字
        例如 int('00000111') 返回 7

        进制转换自行搜索或者论坛提问大家讨论吧
        */



    // 作业 5
    var zfill = function(n, width) {
        var result = ''
        var len = width - String(n).length
        for(var i = 0; i < len; i++) {
            result += '0'
        }
        return result + n
    }
    var binary = function(n) {
        var num = 0
        var result = 0
        for(var i = 0; i < 8; i++) {
            num = n % 2
            n = Math.floor(n / 2)
            result = result + num * Math.pow(10, i)
        }
        console.log(result)
        return zfill(result, 8)
    }
    var binaryStream = function(s) {
        var len = s.length
        var result = ''
        for(var i = 0; i < len; i++) {
            var char = s[i]
            var n = ascii(char)
            result += binary(n)
        }
        return result
    }
    log(binaryStream('Man'))
        /*
        s 是一个 string
        返回 s 的二进制字符串
        例如 binaryStream('Man') 返回
        '010011010110000101101110'
         010011010110000101101110

        使用上面的函数
        */



    // 作业 6
    var int = function(bin) {
        bin = Number(bin)
        var num = 0
        var result = 0
        for(var i = 0; i < 8; i++) {
            num = bin % 10
            bin = Math.floor(bin / 10)
            result = result + num * Math.pow(2, i)
        }
        return result
    }
    log(int('1001101'))
    var stringFromBinary = function(bins) {
        var str = ''
        for(var i = 0; i < bins.length / 8; i++) {
            var bin = bins.slice(i*8, i*8 + 8)
            var num = int(bin)
            str = str + String.fromCharCode(num)
        }
        return str
    }
    log(stringFromBinary('010011010110000101101110'))



        /*
        bins 是一个二进制形式的字符串
        返回 bins 代表的原始字符串
        例如 stringFromBinary('010011010110000101101110') 返回 'Man'

        使用上面的函数
        */



    // 作业 7
    var int = function(bin) {
        bin = Number(bin)
        num = 0;
        result = 0
        for(var i = 0; i < 8; i++) {
            num = bin % 10
            bin = Math.floor(bin / 10)
            result = result + num * Math.pow(2, i)
        }
        return result
    }
    var zfill = function(n, width) {
        n = String(n)
        var len = width - n.length
        var result = ''
        for(var i = 0; i < len; i++) {
            result += '0'
        }
        return result + n
    }
    var binary = function(n) {
        n = Number(n)
        num = 0
        result = 0
        for(var i = 0; i < 8; i++) {
            num = n % 2
            n = Math.floor(n / 2)
            result = result + num * Math.pow(10, i)
        }
        result = zfill(result, 8)
        log('binary', result)

        return result
    }
    var binaryStream = function(s) {
        s = String(s || '')
        var result = ''
        for(var i = 0; i < s.length; i++) {
            var cell = binary(s.charCodeAt(i))
            result += cell
            log(44444, s, s.charCodeAt(i))
        }
        return result
    }
    log('binaryStream', binaryStream('M'))
    var base64Encode3 = function(s) {
        s = String(s)
        var result = ''
        var bins = ''
        for(var i = 0; i < 3; i++) {
            bins += binary(s.charCodeAt(i) || 0)
        }
        log('3333', bins)
        var codeOrder = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'
        for(var j = 0; j < 4; j++) {
            var cell = bins.slice(j*6, j*6 + 6)
            var code = int(cell)
            log(555, code)
            for (var i = 0; i < codeOrder.length; i++) {
                if (i == code && code > 0) {
                    var baseChar = codeOrder[i]
                    result = result + baseChar
                }
            }
        }
        return result
    }
    var base64Encode = function(s) {
        var result = ''
        for(var i = 0; i < Math.floor(s.length / 3) + 1; i++) {
            var cell = s.slice(i*3, i*3+3)
            log(2222,cell)
            result = result + base64Encode3(cell)
        }
        log(11111, result)
        var res = s.length % 3
        var str = ['', '==', '=']
        return result + str[res]
    }
    log('man', base64Encode('ManManM'))
        /*
        s 是一个 string
        返回 s 的 base64 编码

    Base64是一种基于 64 个可打印字符来表示数据的方法
    它用每6个比特为一个单元，对应某个可打印字符
    ASCII 码一个字符是 8 比特, 也就是一字节
    3 个字节就有 24 个比特, 对应了 4 个 base64 单元

    如下所示
    原始信息        M        a        n
    ASCII         77       97        110
    二进制         01001101 01100001 01101110
    4 个单元       010011 010110 000101 101110
    每个单元转换后  19  22  5  46

    转换后每个 base64 单元都是一个 0-63 的数字
    因为 6 比特表示的范围就是这么大
    然后数字到字符串的转换是下面这段字符串取下标所得
    'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'

    那么 Base64 编码结果就是    T   W   F  u

    所以 base64Encode('Man') 返回 'TWFu'


    既然 3 个字节转换为 4 个 base64 单元
    那么 1 个字节怎么办呢?
    答案是用 0 补出 3 字节, 如下所示
    原始信息    M
    ASCII     77       0        0
    二进制     01001101 00000000 00000000
    4 个单元   010011 010000 000000 000000
    单元转换后  19 16 0 0
    因为末尾是强行补上的, 所以给他用 '=' 凑出字符(这是一个例外)
    所以 base64Encode('M') 返回 'TQ=='
        */



    // 作业 8
    var int = function(bin) {
        
    }
    var zfill = function(n, width) {
    
    }
    var binary = function(n) {
        
    }
    var base64Decode = function(s) {
        
    }
    base64Decode('TWFuTQ==')
    </script>
  </body>
</html>
